{% extends 'public/index.html' %}
{% block css %}
<link href="/static/assets/theme/default/style.min.css" rel="stylesheet" xmlns="http://www.w3.org/1999/html"/>
<!-- BEGIN PAGE LEVEL STYLES -->
<link rel="stylesheet" type="text/css" href="/static/assets/plugins/select2/select2.css"/>
<link rel="stylesheet" type="text/css" href="/static/assets/plugins/select2/select2-metronic.css"/>
<link rel="stylesheet" href="/static/assets/css/DT_bootstrap.css"/>
<!-- END PAGE LEVEL STYLES -->
<link rel="stylesheet" type="text/css" href="/static/assets/plugins/bootstrap-select/bootstrap-select.min.css"/>
<link rel="stylesheet" type="text/css" href="/static/assets/plugins/jquery-multi-select/css/multi-select.css"/>
<link rel="stylesheet" type="text/css" href="/static/assets/plugins/bootstrap-datepicker/css/datepicker.css" />

{% endblock %}
{% block body %}
<div class="row">
    <ul class="nav nav-pills nav-justified steps">
    {% if status >= 0 %}
        <li class="active">
            <a class="step">
                <span class="number">
                     0
                </span>
                <span class="desc">
                    <i class="fa fa-check"></i> 发起人
                </span>
            </a>
        </li>
    {% else %}
        <li>
            <a class="step">
                <span class="number">
                     1
                </span>
                <span class="desc">
                    <i class="fa fa-times"></i> 发起人
                </span>
            </a>
        </li>
    {% endif %}
    {% if status > 1 %}
        <li class="active">
            <a class="step">
                <span class="number">
                     1
                </span>
                <span class="desc">
                    <i class="fa fa-check"></i> 中心负责人
                </span>
            </a>
        </li>
    {% else %}
        <li>
            <a class="step">
                <span class="number">
                     1
                </span>
                <span class="desc">
                    <i class="fa fa-times"></i> 中心负责人
                </span>
            </a>
        </li>
    {% endif %}
    {% if status > 2 %}
        <li class="active">
            <a class="step">
                <span class="number">
                     2
                </span>
                <span class="desc">
                    <i class="fa fa-check"></i> 财务
                </span>
            </a>
        </li>
    {% else %}
        <li>
            <a class="step">
                <span class="number">
                     2
                </span>
                <span class="desc">
                    <i class="fa fa-times"></i> 财务
                </span>
            </a>
        </li>
    {% endif %}
    {% if status > 3 %}
        <li class="active">
            <a class="step">
                <span class="number">
                     3
                </span>
                <span class="desc">
                    <i class="fa fa-check"></i> 财务总
                </span>
            </a>
        </li>
    {% else %}
        <li>
            <a class="step">
                <span class="number">
                     3
                </span>
                <span class="desc">
                    <i class="fa fa-times"></i> 财务总
                </span>
            </a>
        </li>
    {% endif %}
    {% if status > 4 %}
        <li class="active">
            <a class="step">
                <span class="number">
                     4
                </span>
                <span class="desc">
                    <i class="fa fa-check"></i> 法务
                </span>
            </a>
        </li>
    {% else %}
        <li>
            <a class="step">
                <span class="number">
                     4
                </span>
                <span class="desc">
                    <i class="fa fa-times"></i> 法务
                </span>
            </a>
        </li>
    {% endif %}
    {% if status > 5 %}
        <li class="active">
            <a class="step">
                <span class="number">
                     5
                </span>
                <span class="desc">
                    <i class="fa fa-check"></i> 法务总
                </span>
            </a>
        </li>
    {% else %}
        <li>
            <a class="step">
                <span class="number">
                     5
                </span>
                <span class="desc">
                    <i class="fa fa-times"></i> 可选流程
                </span>
            </a>
        </li>
    {% endif %}
    {% if status > 6 %}
        <li class="active">
            <a class="step">
                <span class="number">
                     6
                </span>
                <span class="desc">
                    <i class="fa fa-check"></i> 可选流程
                </span>
            </a>
        </li>
    {% else %}
        <li>
            <a class="step">
                <span class="number">
                     6
                </span>
                <span class="desc">
                    <i class="fa fa-times"></i> 法务总
                </span>
            </a>
        </li>
    {% endif %}
    {% if status > 7 %}
        <li class="active">
            <a class="step">
                <span class="number">
                     7
                </span>
                <span class="desc">
                    <i class="fa fa-check"></i> 总经理
                </span>
            </a>
        </li>
    {% else %}
        <li>
            <a class="step">
                <span class="number">
                     7
                </span>
                <span class="desc">
                    <i class="fa fa-times"></i> 总经理
                </span>
            </a>
        </li>
    {% endif %}
    {% if status > 8 %}
        <li class="active">
            <a class="step">
                <span class="number">
                     8
                </span>
                <span class="desc">
                    <i class="fa fa-check"></i> 盖章
                </span>
            </a>
        </li>
    {% else %}
        <li>
            <a class="step">
                <span class="number">
                     8
                </span>
                <span class="desc">
                    <i class="fa fa-times"></i> 盖章
                </span>
            </a>
        </li>
    {% endif %}
    {% if status > 9 %}
        <li class="active">
            <a class="step">
                <span class="number">
                     9
                </span>
                <span class="desc">
                    <i class="fa fa-check"></i> 归档
                </span>
            </a>
        </li>
    {% else %}
        <li>
            <a class="step">
                <span class="number">
                     9
                </span>
                <span class="desc">
                    <i class="fa fa-times"></i> 归档
                </span>
            </a>
        </li>
    {% endif %}
    <br>
    <div class="col-md-12">
        <!-- BEGIN EXAMPLE TABLE PORTLET-->
        <a id="back" class="btn btn-sm yellow">
             返回 <i class="fa fa-reply"></i>
        </a>
{#    {% if status == 1 %}#}
        <a id="edit" class="btn btn-sm blue">
             修改 <i class="fa fa-edit"></i>
        </a>
{#    {% endif %}#}
        <div class="portlet box grey">
            <div class="portlet-title">
                <div class="caption">
                    <i class="fa fa-reorder"></i>合同信息
                </div>
            </div>
            <div class="portlet-body form">
                <!-- BEGIN FORM-->
                <form class="form-horizontal form-bordered" onsubmit ="getElementById('submit').disabled=true; return true;" target=”_blank” action="/contract_apply_detail/"  enctype="multipart/form-data" method="post">
                    <div class="form-body">
                        <div class="form-group">
                            <label class="control-label col-md-1">合同编号</label>
                            <div class="col-md-2">
                                <input type="text" id="contract_uuid" name="contract_uuid" class="form-control">
                            </div>
                            <label class="control-label col-md-offset-2 col-md-1">原合同编号</label>
                            <div class="col-md-2">
                                <input type="text" id="origin_contract_uuid" name="origin_contract_uuid" class="form-control">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-1">* 我方签署公司</label>
                            <div class="col-md-2">
                                <input type="text" id="party_a" name="party_a" class="form-control">
                            </div>
                            <label class="control-label col-md-offset-2 col-md-1">申请时间</label>
                            <div class="col-md-2">
                                <input type="text" id="apply_time" name="apply_time" class="form-control">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-1">申请人</label>
                            <div class="col-md-2">
                                <input type="text" id="name" name="name" class="form-control">
                            </div>
                            <label class="control-label col-md-offset-2 col-md-1">所属中心</label>
                            <div class="col-md-2">
                                <input type="text" id="department" name="department" class="form-control">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-1">* 财务分类</label>
                            <div class="col-md-2">
                                <input type="text" id="finance_class" name="finance_class" class="form-control">
                            </div>
                            <label class="control-label col-md-offset-2 col-md-1">* 合同类型</label>
                            <div class="col-md-2">
                                <input type="text" id="contract_class" name="contract_class" class="form-control">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-1">* 合同名称</label>
                            <div class="col-md-2">
                                <input type="text" id="contract_name" name="contract_name" class="form-control">
                            </div>
                            <label class="control-label col-md-offset-2 col-md-1">* 合作方名称</label>
                            <div class="col-md-2">
                                <input type="text" id="party_b" name="party_b" class="form-control">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-1">联系地址</label>
                            <div class="col-md-2">
                                <input type="text" id="address" name="address" class="form-control">
                            </div>
                            <label class="control-label col-md-offset-2 col-md-1">* 联系人</label>
                            <div class="col-md-2">
                                <input type="text" id="contacts" name="contacts" class="form-control">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-1">邮箱</label>
                            <div class="col-md-2">
                                <input type="text" id="e_mail" name="e_mail" class="form-control">
                            </div>
                            <label class="control-label col-md-offset-2 col-md-1">* 电话1</label>
                            <div class="col-md-2">
                                <input type="text" id="phone_1" name="phone_1" class="form-control">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-1">电话2</label>
                            <div class="col-md-2">
                                <input type="text" id="phone_2" name="phone_2" class="form-control">
                            </div>
                            <label class="control-label col-md-offset-2 col-md-1">传真</label>
                            <div class="col-md-2">
                                <input type="text" id="fax" name="fax" class="form-control">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-1">开户行</label>
                            <div class="col-md-2">
                                <input type="text" id="bank" name="bank" class="form-control">
                            </div>
                            <label class="control-label col-md-offset-2 col-md-1">银行账号</label>
                            <div class="col-md-2">
                                <input type="text" id="bank_account" name="bank_account" class="form-control">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-1">* 合同概要</label>
                            <div class="col-md-7">
                                <textarea id="contract_detail" name="contract_detail" placeholder="" rows="2" maxlength="" class="form-control"></textarea>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-1">* 合同金额小写</label>
                            <div class="col-md-2">
                                <input type="text" id="contract_amount_figures" name="contract_amount_figures" class="form-control">
                            </div>
                            <label class="control-label col-md-offset-2 col-md-1">合同金额大写</label>
                            <div class="col-md-2">
                                <input type="text" id="contract_amount_words" name="contract_amount_words" class="form-control">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-1">特殊要求</label>
                            <div class="col-md-7">
                                <textarea id="special_requirements" name="special_requirements" placeholder="" rows="2" maxlength="" class="form-control"></textarea>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-1">合同有效期</label>
                            <div class="col-md-2">
                                <div id="reportrange" class="btn default">
                                    <input type="text" id="begin" name="begin" style="display: none">
                                    <input type="text" id="end" name="end" style="display: none">
                                    <i class="fa fa-calendar"></i>
                                    <span>
                                    </span>
                                    <b class="fa fa-angle-down"></b>
                                </div>
                            </div>
                            <label class="control-label col-md-offset-2 col-md-1">合作方资质</label>
                            <div class="col-md-2">
                                <input type="text" id="partner_qualification" name="partner_qualification" class="form-control">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-1">盖章情况</label>
                            <div class="col-md-2">
                                <input type="text" id="stamp_status" name="stamp_status" class="form-control">
                            </div>
                            <label class="control-label col-md-offset-2 col-md-1">归档情况</label>
                            <div class="col-md-2">
                                <input type="text" id="archive_status" name="archive_status" class="form-control">
                            </div>
                        </div>
                        <div class="form-group last">
                            <label class="control-label col-md-1">备注</label>
                            <div class="col-md-10">
                                <textarea id="comment" name="comment" placeholder="" rows="3" maxlength="" class="form-control"></textarea>
                            </div>
                        </div>
                        <input id="id" name="id" style="display:none">
                        <input id="commit" name="commit" style="display:none">
                    </div>
                    <div class="form-actions fluid">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="col-md-offset-11 col-md-9">
                                    <button id="submit" class="btn purple" type="submit"><i class="fa fa-check"></i> 提交</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
                <!-- END FORM-->
            </div>
        </div>
{#    {% if request.session.personal_information_id %}#}
        <div class="portlet box grey tasks-widget">
            <div class="portlet-title">
                <div class="caption">
                    <i class="fa fa-globe"></i>流程明细
                </div>
            </div>
            <div class="portlet-body">
                <table class="table table-striped table-bordered table-hover table-full-width"  id="datatables">
                    <thead>
                    <tr>
                        <th>提交时间</th>
                        <th>提交人</th>
                        <th>意见</th>
                        <th>附件</th>
                        <th>审批内容</th>
                        <th>ID</th>
                    </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </div>
        </div>
{#    {% endif %}#}
    </div>
</div>

<!--/datatables-->
{% endblock %}

{% block js %}
<script type="text/javascript" src="/static/assets/plugins/select2/select2.min.js"></script>
<script type="text/javascript" src="/static/assets/plugins/data-tables/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="/static/assets/plugins/data-tables/DT_bootstrap.js"></script>

<!--<script src="/static/assets/plugins/context.js"></script>-->
<!--<script src="/static/assets/plugins/jstree/dist/jstree.min.js"></script>-->
<script src="/static/assets/plugins/holder.js"></script>
<script src="/static/assets/plugins/stilearn-base.js"></script>
<script type="text/javascript" src="/static/assets/plugins/bootstrap-select/bootstrap-select.min.js"></script>
<script type="text/javascript" src="/static/assets/plugins/jquery-multi-select/js/jquery.multi-select.js"></script>
<script src="/static/assets/plugins/select2/select2.js"></script>
<script src="/static/assets/plugins/datatables/extras/TableTools.min.js"></script>
<script src="/static/assets/scripts/custom/table-managed.js"></script>
<script type="text/javascript" src="/static/assets/plugins/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
<script type="text/javascript" src="/static/assets/plugins/jquery-inputmask/jquery.inputmask.bundle.min.js"></script>
<script type="text/javascript" src="/static/assets/plugins/fuelux/js/spinner.min.js" ></script>
<script type="text/javascript" src="/static/assets/plugins/bootstrap-fileinput/bootstrap-fileinput.js" ></script>
<script type="text/javascript" src="/static/assets/plugins/jquery.input-ip-address-control-1.0.min.js" ></script>
<script src="/static/assets/plugins/jquery.pwstrength.bootstrap/src/pwstrength.js" ></script>
<script src="/static/assets/plugins/bootstrap-switch/js/bootstrap-switch.min.js" ></script>
<script src="/static/assets/plugins/jquery-tags-input/jquery.tagsinput.min.js" ></script>
<script src="/static/assets/plugins/bootstrap-maxlength/bootstrap-maxlength.min.js" ></script>
<script src="/static/assets/plugins/bootstrap-touchspin/bootstrap.touchspin.js" ></script>
<script src="/static/assets/plugins/typeahead/handlebars.min.js" ></script>
<script src="/static/assets/plugins/typeahead/typeahead.min.js" type="text/javascript"></script>
<script src="/static/assets/scripts/custom/components-form-tools.js"></script>

<script type="text/javascript">
var oTable;
var aButtons
/* Formating function for row details */

$(document).ready(function () {

    $('#reportrange').daterangepicker({
        opens: (App.isRTL() ? 'left' : 'right'),

    //    startDate: moment().subtract('days', 29),
    //    endDate: moment(),
{#        minDate: moment().subtract(90,'days'),#}
{#        maxDate: moment().add(90,'days'),#}
{#        dateLimit: {#}
{#            days: 2800#}
{#        },#}
        showDropdowns: true,
        showWeekNumbers: false,
        timePicker: false,
        timePickerIncrement: 1,
        timePicker12Hour: false,
        ranges: {
           'Today': [moment(), moment()],
{#           'Yesterday': [moment().subtract(1, 'days'), moment().subtract(1, 'days')],#}
{#           'Last 7 Days': [moment().subtract(6, 'days'), moment()],#}
{#           'This Month': [moment().startOf('month'), moment().endOf('month')],#}
{#           'Last Month': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')]#}
        },
        buttonClasses: ['btn'],
        applyClass: 'green',
        cancelClass: 'default',
        format: 'YYYY/MM/DD',
        separator: ' to ',
        locale: {
            applyLabel: 'Apply',
            fromLabel: 'From',
            toLabel: 'To',
            customRangeLabel: '自定义',
            daysOfWeek: ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'],
            monthNamesShort: ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12'],
            firstDay: 1
        }
        },
        function (start, end) {
            $('#reportrange span').html(start.format('YYYY-MM-DD') + '  ->  ' + end.format('YYYY-MM-DD'));
            $('#begin').val(start.format('YYYY-MM-DD'));
            $('#end').val(end.format('YYYY-MM-DD'))
        }
    );




    $('#finance_class').select2({
        multiple: false,
        placeholder: '请选择财务分类',
        allowClear: true,
        data: [{'text':'收','id':'收'},{'text':'支','id':'支'},{'text':'无金额','id':'无金额'}]
    });

    $('#contract_class').select2({
        multiple: false,
        placeholder: '请选择合同分类',
        allowClear: true,
        data: [{'text':'商务合作','id':'商务合作'},{'text':'艺人经纪','id':'艺人经纪'},{'text':'市场框架','id':'市场框架'},
               {'text':'技术开发','id':'技术开发'},{'text':'行政','id':'行政'},{'text':'人事','id':'人事'},
               {'text':'财务','id':'财务'},{'text':'法务','id':'法务'},{'text':'其他','id':'其他'}]
    });

    $('#party_a').select2({
        multiple: false,
        placeholder: '请选择公司',
        allowClear: true,
        data: [{'text':'上海六界信息技术有限公司','id':'上海六界信息技术有限公司'},
               {'text':'竹筏科技（北京）科技有限公司','id':'竹筏科技（北京）科技有限公司'}]
    });


{#    $('#phone').inputmask({#}
{#        "mask": "99999999999"#}
{#    });#}
{##}
{#    $('#date_of_entry').attr('disabled',true)#}
{##}
{##}
{#    $('#graduate_date').inputmask("y-m-d", {#}
{#        "placeholder": "yyyy-mm-dd"#}
{#    })#}



{#{% if request.session.personal_information %}#}
{#    {% ifequal request.session.personal_information '保存成功' %}#}
{#        toastr.success('保存成功');#}
{#        setTimeout('location.href = "/personal_information_table/"',500);#}
{#    {% else %}#}
{#        toastr.error('{{ request.session.personal_information }}');#}
{#    {% endifequal %}#}
{#{% endif %}#}
{##}
{#    $('#resumes_button').on('change',function(){#}
{#        $('#resumes_show').html($('#resumes').val())#}
{#    });#}
{% if request.session.contract_id %}
    $('#party_a').select2('data',{'text':'{{ party_a }}','id':'{{ party_a }}'});
    $('#apply_time').val('{{ apply_time }}');
    $('#name').val('{{ name }}');
    $('#department').val('{{ department }}');
    $('#finance_class').select2('data',{'text':'{{ finance_class }}','id':'{{ finance_class }}'});
    $('#contract_class').select2('data',{'text':'{{ contract_class }}','id':'{{ contract_class }}'});
    $('#contract_uuid').val('{{ contract_uuid }}');
    $('#origin_contract_uuid').val('{{ origin_contract_uuid }}');
    $('#contract_name').val('{{ contract_name }}');
    $('#party_b').val('{{ party_b }}');
    $('#address').val('{{ address }}');
    $('#contacts').val('{{ contacts }}');
    $('#e_mail').val('{{ e_mail }}');
    $('#phone_1').val('{{ phone_1 }}');
    $('#phone_2').val('{{ phone_2 }}');
    $('#fax').val('{{ fax }}');
    $('#bank').val('{{ bank }}');
    $('#bank_account').val('{{ bank_account }}');
    $('#contract_detail').val('{{ contract_detail }}');
    $('#contract_amount_figures').val('{{ contract_amount_figures }}');
    $('#contract_amount_words').val('{{ contract_amount_words }}');
    $('#special_requirements').val('{{ special_requirements }}');
    $('#reportrange span').html('{{ contract_begin_time }}' + '  ->  ' + '{{ contract_end_time }}');
    $('#begin').val('{{ contract_begin_time }}')
    $('#end').val('{{ contract_begin_time }}')
    $('#partner_qualification').val('{{ partner_qualification }}');
    $('#comment').val('{{ comment }}')
    $('#submit').hide()
{% else %}
    $('#name').val('{{ name }}');
    $('#department').val('{{ department }}');
    $('#reportrange span').html(moment().format('YYYY-MM-DD') + '  ->  ' + moment().format('YYYY-MM-DD'));
    $('#begin').val(moment().format('YYYY-MM-DD'));
    $('#end').val(moment().format('YYYY-MM-DD'));
{% endif %}


{% if stamp_status %}
    $('#stamp_status').val('已盖章');
{% else %}
    $('#stamp_status').val('未盖章');
{% endif %}
{% if archive_status %}
    $('#archive_status').val('已归档');
{% else %}
    $('#archive_status').val('未归档');
{% endif %}


{#    $('#resumes_show').html('{{ resumes }}')#}
{#    $('#resumes_show').attr('href','/media/{{ resumes_path }}')#}
{#    $('#direction').val('{{ direction }}')#}
{#    $('#resource_state').select2('data',{'text':'{{ resource_state }}','id':'{{ resource_state }}'})#}
{#    $('#comment').val('{{ comment }}')#}
{#    $('#state_change_time').val('{{ state_change_time }}')#}
{#    $('#executor').select2('data',{'text':'{{ executor }}','id':'{{ executor }}'})#}
    $('#id').val('{{ id }}')

    $('#commit').val('1')



{#    loaddata()#}

    $('#back').on('click',function(){
        history.go(-1)
    });

{% if request.session.contract_id %}
    $('#contract_uuid').attr('disabled',true);
    $('#origin_contract_uuid').attr('disabled',true);
    $('#party_a').attr('disabled',true);
    $('#apply_time').attr('disabled',true);
    $('#name').attr('disabled',true);
    $('#department').attr('disabled',true);
    $('#finance_class').attr('disabled',true);
    $('#contract_class').attr('disabled',true);
    $('#contract_name').attr('disabled',true);
    $('#party_b').attr('disabled',true);
    $('#address').attr('disabled',true);
    $('#contacts').attr('disabled',true);
    $('#e_mail').attr('disabled',true);
    $('#phone_1').attr('disabled',true);
    $('#phone_2').attr('disabled',true);
    $('#fax').attr('disabled',true);
    $('#bank').attr('disabled',true);
    $('#bank_account').attr('disabled',true);
    $('#contract_detail').attr('disabled',true);
    $('#contract_amount_figures').attr('disabled',true);
    $('#contract_amount_words').attr('disabled',true);
    $('#special_requirements').attr('disabled',true);
    $('#reportrange').attr('disabled',true);
    $('#partner_qualification').attr('disabled',true);
    $('#stamp_status').attr('disabled',true);
    $('#archive_status').attr('disabled',true);
    $('#comment').attr('disabled',true);
{% else %}
    $('#contract_uuid').attr('disabled',true);
    $('#origin_contract_uuid').attr('disabled',false);
    $('#party_a').attr('disabled',false);
    $('#apply_time').attr('disabled',true);
    $('#name').attr('disabled',true);
    $('#department').attr('disabled',true);
    $('#finance_class').attr('disabled',false);
    $('#contract_class').attr('disabled',false);
    $('#contract_name').attr('disabled',false);
    $('#party_b').attr('disabled',false);
    $('#address').attr('disabled',false);
    $('#contacts').attr('disabled',false);
    $('#e_mail').attr('disabled',false);
    $('#phone_1').attr('disabled',false);
    $('#phone_2').attr('disabled',false);
    $('#fax').attr('disabled',false);
    $('#bank').attr('disabled',false);
    $('#bank_account').attr('disabled',false);
    $('#contract_detail').attr('disabled',false);
    $('#contract_amount_figures').attr('disabled',false);
    $('#contract_amount_words').attr('disabled',true);
    $('#special_requirements').attr('disabled',false);
    $('#reportrange').attr('disabled',false);
    $('#partner_qualification').attr('disabled',false);
    $('#stamp_status').attr('disabled',true);
    $('#archive_status').attr('disabled',true);
    $('#comment').attr('disabled',false);
{% endif %}

    $('#edit').on('click',function(){
        $('#contract_uuid').attr('disabled',true);
        $('#origin_contract_uuid').attr('disabled',false);
        $('#party_a').attr('disabled',false);
        $('#apply_time').attr('disabled',true);
        $('#name').attr('disabled',true);
        $('#department').attr('disabled',true);
        $('#finance_class').attr('disabled',false);
        $('#contract_class').attr('disabled',false);
        $('#contract_name').attr('disabled',false);
        $('#party_b').attr('disabled',false);
        $('#address').attr('disabled',false);
        $('#contacts').attr('disabled',false);
        $('#e_mail').attr('disabled',false);
        $('#phone_1').attr('disabled',false);
        $('#phone_2').attr('disabled',false);
        $('#fax').attr('disabled',false);
        $('#bank').attr('disabled',false);
        $('#bank_account').attr('disabled',false);
        $('#contract_detail').attr('disabled',false);
        $('#contract_amount_figures').attr('disabled',false);
        $('#contract_amount_words').attr('disabled',true);
        $('#special_requirements').attr('disabled',false);
        $('#reportrange').attr('disabled',false);
        $('#partner_qualification').attr('disabled',false);
        $('#stamp_status').attr('disabled',true);
        $('#archive_status').attr('disabled',true);
        $('#comment').attr('disabled',false);
        $('#submit').show()
        $('#edit').attr('disabled',true);
        $.post('/contract_set_session/', {commit:1}, function (d) {})
    });

    $('#contract_amount_figures').on('change',function(){
        $('#contract_amount_words').val('')
    });


    loaddata()

});

function loaddata() {
    oTable = $('#datatables').dataTable({
        "sAjaxSource": "/contract_process_detail_data/?rand=" + Math.random(),
        "sDom": "<'row-fluid'<'span6'T><'span6'f>r><'table-scrollable't><'fluid'<'span3'l><'span4'i><'span5'p>>",
        "bServerSide": true,
        "bPaginate": true, // 是否使用分页
        "bProcessing": true, //是否显示正在处理的提示
        "bLengthChange": true, //是否启用设置每页显示记录数
        "bFilter": true, //是否使用搜索
        "bStateSave": false,
        "bDestroy": true,
        "bSort": true, //是否使用排序
        "bAutoWidth": true, //列的宽度会根据table的宽度自适应
        "sPaginationType": "bootstrap",
//        "aLengthMenu": [
//                    [5, 15, 20, -1],
//                    [5, 15, 20, "All"] // change per page values here
//                ],
        "oTableTools": {
            "sRowSelect": "",
            'aButtons': []
        },
        "aoColumns": [
            { "sClass": "center", 'sWidth': "10%"},
            { "sClass": "center", 'sWidth': "10%"},
            { "sClass": "center", 'sWidth': "30%"},
            { "sClass": "center", 'sWidth': "10%"},
            { "sClass": "center", 'sWidth': "10%"},
            { "sClass": "center", 'sWidth': "5%", 'bVisible': false}


        ],
        "aaSorting": [
            [6, 'desc']
        ],
        "oLanguage": {
            "sProcessing": "正在加载数据...",
            'sSearch': '数据筛选:',
            "sLengthMenu": "每页显示 _MENU_ 项记录",
            "sZeroRecords": "没有符合项件的数据...",
            "sInfo": "当前数据为从第 _START_ 到第 _END_ 项数据；总共有 _TOTAL_ 项记录",
            "sInfoEmpty": "显示 0 至 0 共 0 项",
            "sInfoFiltered": "(_MAX_)",
            "oPaginate": {
                "sFirst": '首页',
                "sPrevious": "上一页",
                "sNext": "下一页",
                "sLast": "最后一页"
            }

        },
        "fnInitComplete": function (oSettings, json) {
            $('input[type=checkbox],input[type=radio],input[type=file][name!=resumes]').uniform()
        },
        "fnDrawCallback": function (oSettings) {
            $('input[type=checkbox],input[type=radio],input[type=file][name!=resumes]').uniform()
        },
        "fnRowCallback": function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {
            if(aData[2] == 1){
                $('td:eq(2)',nRow).html('<div>审批通过</div>')
            }else if(aData[2] == 0){
                $('td:eq(2)',nRow).html('<div>审批不通过</div>')
            }else if(aData[2] == -1){
                $('td:eq(2)',nRow).html('<div>退回修改</div>')
            }
            $('td:eq(3)',nRow).on('click',function(){
                location.href = '/'+aData[3]
            })
        },
        "fnServerData": function (sSource, aoData, fnCallback) {
            aoData.push({csrfmiddlewaretoken: '{{ csrf_token }}'})
            $.ajax({
                "dataType": 'json',
                "type": "POST",
                "url": sSource,
                "data": aoData,
                "success": fnCallback
            });
        }
    });
}


{% if request.session.contract_result %}
    {% ifequal request.session.contract_result '保存成功' %}
        toastr.success('保存成功')
        setTimeout('location.href = "/contract_apply/"',500)
    {% else %}
        toastr.error('{{ request.session.contract_result }}')
    {% endifequal %}
{% endif %}


function add(){
    $.post('/personal_information_interview_set_session/', {id:0}, function (d) {
        location.href = '/personal_information_interview_detail/'
    })
}

</script>
{% endblock %}